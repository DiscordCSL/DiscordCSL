const serverHeader_class="container-1NXEtd",serverName_class="name-3Uvkvr",manifestVersion=chrome.runtime.getManifest().version;var get=function(e,s,r){var t=new XMLHttpRequest;t.open("GET",s,!0),t.responseType=e,t.onload=function(){var e=t.status;200==e?r(null,t.response):r(e,t.response)},t.send()};function log(e,s){let r;"log"==e?r="#7289da":"info"==e?r="#43b581":"warn"==e?r="#faa61a":"error"==e&&(r="#f04747"),console.log(`%cDiscord CSL v${manifestVersion}%c ${s}`,`color: ${r}; border-right: 2px solid ${r}; padding-right: 5px; font-weight: bold`,"font-style: italic;","")}function addStyle(){let e=document.createElement("style");e.textContent=`
[csl-server] div.guildIconContainer-3QvE6w {
    transform: translate(-6%, 6%)
}
[csl-server] .${serverName_class} {
    display: flex;
    justify-content: center;
    position: relative;
}

/* == Shrink server banners to header instead of disappearing == */
[csl-server] [class*="animatedContainer-"] {
    opacity: 1 !important;
    transition: opacity .5s, blur .5s;
}
[csl-server] [class*="animatedContainer-"] > [class*="bannerImage-"] {
    transition: margin .5s;
}
[csl-server] :not([class*="bannerVisible-"]) > [class*="animatedContainer-"] {
    opacity: .35 !important;
    filter: blur(2px);
    height: 138px;
}
[csl-server] :not([class*="bannerVisible-"]) > [class*="animatedContainer-"] > [class*="bannerImage-"] {
    margin-top: -12px;
}`,document.head.append(e)}var injectLogo=()=>{get("json","https://raw.githubusercontent.com/DiscordCSL/database/main/db.json",function(e,s){if(null!==e)log("error","Failed to fetch database json!");else for(var r,t=s.servers.length;t--;)window.location.pathname.split("/")[2]==s.servers[t].id&&(document.getElementsByClassName(serverHeader_class)[0].hasAttribute("csl-server")?Error&&!document.getElementsByClassName(serverHeader_class)[0].hasAttribute("csl-server")&&log("error","No server header found. Try restarting the app and reinstalling the plugin, before reporting any issues."):(document.getElementsByClassName(serverHeader_class)[0].setAttribute("csl-server",""),get("text",(r=s.servers[t]).logoURL,function(e,s){null!==e?log("error",`Failed to fetch server logo vector data! | ${r.id}`):document.getElementsByClassName(serverName_class)[0].innerHTML=s})))})};window.addEventListener("load",function(){addStyle(),setInterval(injectLogo,0),log("log","Thanks for installing Custom Server Logos!"),get("json","https://raw.githubusercontent.com/DiscordCSL/database/main/db.json",function(e,s){null!==e?log("error","Failed to fetch database json!"):s.latestVersion>manifestVersion?log("error",`You're running an older version of this plugin, please update to the latest version, ${s.latestVersion}.`):log("info","You're running the latest and greatest.")})});